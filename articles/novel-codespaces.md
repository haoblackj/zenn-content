---
title: "GitHub Codespaces で小説を書く時代"
emoji: "📌"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["GitHub","VSCode","codespaces","Tech"]
published: false
---

# 概要
- 環境は「使い回す」時代へ
- 執筆環境を Codespaces 化した
- dotfiles を使おう

# 執筆環境について
以前、こんな記事を書いた。
https://zenn.dev/haoblackj/articles/8cbadb26ca16e4
ありがたいことに多くの反響をいただいている。
しかし、筆者自身は上の記事で紹介したメソッドに少なからぬ不満がある。
##  端末の数だけ環境がある
上の方法では、小説を書く環境を端末ごとにセットアップしなければならない。
VSCode に拡張機能をインストールし、リポジトリをクローンしてきて、```npm ci``` だの ```yarn install``` だのを叩かなければならない。
なるほど VSCode には Setting Sync^[設定やショートカット、拡張機能を同期してくれる機能]があるし、リポジトリのクローンも Git のエイリアスや GitHub CLI を使えば面倒がない。投入すべきコマンドなどは ```README.md``` にでもメモしておけばいい。
込み入った話だが、リポジトリごとに **.vscode** ディレクトリを作成して、インストールすべき拡張機能を制御することも出来る。
しかし、これらの方法には以下の問題点がある。
### 拡張機能の制御
筆者はリポジトリごとに使う拡張機能を決めている。

小説を Markdown 形式で書いてはいるが、**novel-writer**を用いている以上、言語モードは**novel**にしてくれないと困る。
一方、Zenn 執筆用のリポジトリでは、Markdown 形式のファイルは Markdown として認識してくれないと困る。**VS Code Zenn Editor**は Markdown 言語モードでないとプレビューどころか認識さえしてくれないからだ。

一事が万事だ。
Excel Viewer は確かに便利だが、小説リポジトリに Excel ファイルを格納することは(おそらく)ないので、執筆環境の中では動作を重くするだけのお荷物だ。
Zenn リポジトリでは無用の長物の LaTex Workshop も、マニュアル作成・組版用リポジトリではまさに主役として活躍してくれる。

道具は悪くない、いつだって悪いのはそれを使う人間の方なのである。
拡張機能は道具。

### 環境設定ファイルの制御
VSCode だけでなく、Git 自体にも設定項目がある。
- autoCRLF … OS に応じて改行コードを変換してくれる機能(True/False)
- alias … コマンドを自分なりに短縮して登録できる機能

上記は .gitconfig ファイルに登録されるのだが、これも端末ごとの差異要因になる。
さりとて Setting Sync のような自動同期機能は内包していないので、ひとつ修正するごとに他の端末でも修正しないとならない。
リポジトリに設定ファイルを格納できるが、そうすると今度はリポジトリごとに設定ファイルを修正する必要が出てくる。

GitHub CLI という GitHub 謹製のコマンドラインツールにも設定ファイルがあるのだが、こちらはそもそもリポジトリに設定ファイルを格納できない。

さて、どうしてくれようか。

### リポジトリの制御
そもそも、まずリポジトリをローカルに落としている時点で差異が発生するのである。
端末ごとにローカル環境があれば、差異が生じるのも当然だ。

常に生きているリポジトリはひとつ。
これを徹底しない限り、いつまでも端末ごとの差異に悩まされる。
執筆を怠ける言い訳になってしまうではないか。
:::message
拡張機能や設定変更のお試しに検証環境を立ち上げるのは、この限りではない。
:::

## 環境をひとつに
ローカルリポジトリをひとつにすればよさそうというところまではわかった。
ではどうするか。
- 自宅 PC にリモートで繋ぐ
NG。電気代がバカにならんし、故障した日には目も当てられない。
- レンタルサーバーを借りる
NG。さすがに小説執筆環境のためだけに借りるのは採算が合わない。
- USB か何かで持ち歩く
NG というよりナンセンス。Git リポジトリだぞ。

